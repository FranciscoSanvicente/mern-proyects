(this["webpackJsonpmern-proyects-and-tasks1"]=this["webpackJsonpmern-proyects-and-tasks1"]||[]).push([[0],{42:function(e,t,a){e.exports=a(72)},47:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(19),c=a.n(o),l=(a(47),a(13)),s=a(12),u=a(4),i=a(3),p=a(20),m=a.n(p),b=a(17),f=a.n(b),O=Object(r.createContext)(),d=Object(r.createContext)();function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var E=function(e){var t=Object(r.useContext)(O),a=t.alerta,o=t.mostrarAlerta,c=Object(r.useContext)(d),s=c.mensaje,p=c.autenticado,b=c.iniciarSesion;Object(r.useEffect)((function(){p&&e.history.push("/proyectos"),s&&o(s.msg,s.categoria)}),[s,p,e.history]);var E=Object(r.useState)({email:"",password:""}),v=Object(i.a)(E,2),g=v[0],j=v[1],h=g.email,R=g.password,A=function(e){j(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},g,Object(u.a)({},e.target.name,e.target.value)))};return n.a.createElement(m.a,{top:!0},n.a.createElement("div",{className:"form-usuario"},a?n.a.createElement("div",{className:"alerta ".concat(a.categoria)}," ",a.msg," "):null,n.a.createElement(f.a,{cascade:!0},n.a.createElement("div",{className:"contenedor-form sombra-dark"},n.a.createElement("h1",null,"Iniciar Sesi\xf3n"),n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==h.trim()&&""!==R.trim()||o("Todos los campos son obligatorios","alerta-error"),b({email:h,password:R})}},n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Tu Email",value:h,onChange:A})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Tu Password",value:R,onChange:A})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Iniciar Sesi\xf3n"}))),n.a.createElement(l.b,{to:"/nueva-cuenta",className:"enlace-cuenta"},"Obtener Cuenta")))))},v=a(15),g=a.n(v);function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var h=function(e){var t=Object(r.useContext)(O),a=t.alerta,o=t.mostrarAlerta,c=Object(r.useContext)(d),s=c.mensaje,p=c.autenticado,m=c.registrarUsuario;Object(r.useEffect)((function(){p&&e.history.push("/proyectos"),s&&o(s.msg,s.categoria)}),[s,p,e.history]);var b=Object(r.useState)({nombre:"",email:"",password:"",confirmar:""}),f=Object(i.a)(b,2),y=f[0],E=f[1],v=y.nombre,h=y.email,R=y.password,A=y.confirmar,w=function(e){E(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},y,Object(u.a)({},e.target.name,e.target.value)))};return n.a.createElement(g.a,{bottom:!0},n.a.createElement("div",{className:"form-usuario"},a?n.a.createElement("div",{className:"alerta ".concat(a.categoria)}," ",a.msg," "):null,n.a.createElement(g.a,{bottom:!0,cascade:!0},n.a.createElement("div",{className:"contenedor-form sombra-dark"},n.a.createElement("h1",null,"Obtener una cuenta"),n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==v.trim()&&""!==h.trim()&&""!==R.trim()&&""!==A.trim()?R.length<6?o("El password debe ser de al menos 6 caracteres","alerta-error"):R===A?m({nombre:v,email:h,password:R}):o("Los passwords no son iguales","alerta-error"):o("Todos los campos son obligatorios","alerta-error")}},n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"nombre"},"Nombre"),n.a.createElement("input",{type:"text",id:"nombre",name:"nombre",placeholder:"Tu Nombre",value:v,onChange:w})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Tu Email",value:h,onChange:w})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Tu Password",value:R,onChange:w})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"confirmar"},"Confirmar Password"),n.a.createElement("input",{type:"password",id:"confirmar",name:"confirmar",placeholder:"Repite tu Password",value:A,onChange:w})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Registrarme"}))),n.a.createElement(l.b,{to:"/",className:"enlace-cuenta"},"Volver a Iniciar Sesi\xf3n")))))},R=Object(r.createContext)();function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var w=function(){var e=Object(r.useContext)(R),t=e.formulario,a=e.errorformulario,o=e.mostrarFormulario,c=e.agregarProyecto,l=e.mostrarError,s=Object(r.useState)({nombre:""}),p=Object(i.a)(s,2),m=p[0],b=p[1],f=m.nombre;return n.a.createElement(r.Fragment,null,n.a.createElement(g.a,{bottom:!0},n.a.createElement("button",{type:"button",className:"btn btn-block btn-primario",onClick:function(){o()}},"Nuevo Proyecto")),t?n.a.createElement(g.a,{bottom:!0,cascade:!0},n.a.createElement("form",{className:"formulario-nuevo-proyecto",onSubmit:function(e){e.preventDefault(),""!==f?(c(m),b({nombre:""})):l()}},n.a.createElement("input",{type:"text",className:"input-text",placeholder:"Nombre Proyecto",name:"nombre",value:f,onChange:function(e){b(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},m,Object(u.a)({},e.target.name,e.target.value)))}}),n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Agregar Proyecto"}))):null,a?n.a.createElement("p",{className:"mensaje error"},"El nombre del Proyecto es obligatorio"):null)},P=Object(r.createContext)(),T=function(e){var t=e.proyecto,a=Object(r.useContext)(R).proyectoActual,o=Object(r.useContext)(P).obtenerTareas;return n.a.createElement("li",null,n.a.createElement("button",{type:"button",className:"btn btn-blank",onClick:function(){return e=t._id,a(e),void o(e);var e}},t.nombre," "))},N=a(74),C=a(73),k=function(){var e=Object(r.useContext)(R),t=e.mensaje,a=e.proyectos,o=e.obtenerProyectos,c=Object(r.useContext)(O),l=c.alerta,s=c.mostrarAlerta;return Object(r.useEffect)((function(){t&&s(t.msg,t.categoria),o()}),[t]),0===a.length?n.a.createElement("p",null,"No hay proyectos, comienza creando uno"):n.a.createElement("ul",{className:"listado-proyectos"},l?n.a.createElement("div",{className:"alerta ".concat(l.categoria," ")},l.msg):null,n.a.createElement(N.a,null,a.map((function(e){return n.a.createElement(C.a,{key:e._id,timeout:200,classNames:"proyecto"},n.a.createElement(T,{proyecto:e}))}))))},x=function(){return n.a.createElement("aside",null,n.a.createElement("h1",null,"MERN",n.a.createElement("span",null,"Tasks")),n.a.createElement(w,null),n.a.createElement("div",{className:"proyectos"},n.a.createElement("h2",null,"Tus Proyectos"),n.a.createElement(k,null)))},_=function(){var e=Object(r.useContext)(d),t=e.usuario,a=e.usuarioAutenticado,o=e.cerrarSesion;return Object(r.useEffect)((function(){a()}),[]),n.a.createElement("header",{className:"app-header"},t?n.a.createElement("p",{className:"nombre-usuario"},"Hola ",n.a.createElement("span",null,t.nombre," ")," "):null,n.a.createElement("nav",{className:"nav-principal"},n.a.createElement("button",{className:"btn btn-blank cerrar-sesion",onClick:function(){return o()}},"Cerrar Sesi\xf3n")))},S=a(37),I=a.n(S);function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var L=function(){var e=Object(r.useContext)(R).proyecto,t=Object(r.useContext)(P),a=t.tareaseleccionada,o=t.errortarea,c=t.agregarTarea,l=t.validarTarea,s=t.obtenerTareas,p=t.actualizarTarea,m=t.limpiarTarea;Object(r.useEffect)((function(){d(null!==a?a:{nombre:""})}),[a]);var b=Object(r.useState)({nombre:""}),f=Object(i.a)(b,2),O=f[0],d=f[1],y=O.nombre;if(!e)return null;var E=Object(i.a)(e,1)[0];return n.a.createElement(I.a,{top:!0,right:!0},n.a.createElement("div",{className:"formulario"},n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==y.trim()?(null===a?(O.proyecto=E._id,c(O)):(p(O),m()),s(E.id),d({nombre:""})):l()}},n.a.createElement("div",{className:"contenedor-input"},n.a.createElement("input",{type:"text",className:"input-text",placeholder:"Nombre Tarea...",name:"nombre",value:y,onChange:function(e){d(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},O,Object(u.a)({},e.target.name,e.target.value)))}})),n.a.createElement("div",{className:"contenedor-input"},n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-submit btn-block",value:a?"Editar Tarea":"Agregar Tarea"}))),o?n.a.createElement("p",{className:"mensaje error"},"El nombre de la tarea es obligatorio"):null))},U=function(e){var t=e.tarea,a=Object(r.useContext)(R).proyecto,o=Object(r.useContext)(P),c=o.eliminarTarea,l=o.obtenerTareas,s=o.actualizarTarea,u=o.guardarTareaActual,p=Object(i.a)(a,1)[0],m=function(e){e.estado?e.estado=!1:e.estado=!0,s(e)};return n.a.createElement("li",{className:"tarea sombra"},n.a.createElement("p",null,t.nombre," "),n.a.createElement("div",{className:"estado"},t.estado?n.a.createElement("button",{type:"button",className:"completo",onClick:function(){return m(t)}},"Completo"):n.a.createElement("button",{type:"button",className:"incompleto",onClick:function(){return m(t)}},"Incompleto")),n.a.createElement("div",{className:"acciones"},n.a.createElement("button",{type:"button",className:"btn btn-primario",onClick:function(){return function(e){u(e)}(t)}},"Editar"),n.a.createElement("button",{type:"button",className:"btn btn-secundario",onClick:function(){return e=t._id,c(e,p._id),void l(p.id);var e}},"Eliminar")))},G=function(){var e=Object(r.useContext)(R),t=e.proyecto,a=e.eliminarProyecto,o=Object(r.useContext)(P).tareasproyecto;if(!t)return n.a.createElement("h2",null,"Selecciona un proyecto");var c=Object(i.a)(t,1)[0];return n.a.createElement(r.Fragment,null,n.a.createElement(m.a,{right:!0,cascade:!0},n.a.createElement("h2",null,"Proyecto: ",c.nombre," "),n.a.createElement("ul",{className:"listado-tareas"},0===o.length?n.a.createElement("li",{className:"tarea"},n.a.createElement("p",null,"No hay tareas")):n.a.createElement(N.a,null,o.map((function(e){return n.a.createElement(C.a,{key:e.id,timeout:200,classNames:"tarea"},n.a.createElement(U,{tarea:e}))})))),n.a.createElement("button",{type:"button",className:"btn btn-eliminar",onClick:function(){a(c._id)}},"Eliminar Proyecto \xd7")))},Y=function(){var e=Object(r.useContext)(d).usuarioAutenticado;return Object(r.useEffect)((function(){e()}),[]),n.a.createElement(f.a,null,n.a.createElement(f.a,{cascade:!0},n.a.createElement("div",{className:"contenedor-app"},n.a.createElement(x,null),n.a.createElement("div",{className:"seccion-principal"},n.a.createElement(_,null),n.a.createElement("main",null,n.a.createElement(L,null),n.a.createElement("div",{className:"contenedor-tareas"},n.a.createElement(G,null)))))))},F=a(2),M=a.n(F),B=a(10),V=a(21);function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var X=function(e,t){switch(t.type){case"FORMULARIO_PROYECTO":return H({},e,{formulario:!0});case"OBTENER_PROYECTOS":return H({},e,{proyectos:t.payload});case"AGREGAR_PROYECTO":return H({},e,{proyectos:[].concat(Object(V.a)(e.proyectos),[t.payload]),formulario:!1,errorformulario:!1});case"VALIDAR_FORMULARIO":return H({},e,{errorformulario:!0});case"PROYECTO_ACTUAL":return H({},e,{proyecto:e.proyectos.filter((function(e){return e._id===t.payload}))});case"ELIMINAR_PROYECTO":return H({},e,{proyectos:e.proyectos.filter((function(e){return e._id!==t.payload})),proyecto:null});case"PROYECTO_ERROR":return H({},e,{mensaje:t.payload});default:return e}},J=a(38),W=a.n(J).a.create({baseURL:"https://mern-proyects.herokuapp.com/"}),Z=function(e){var t=Object(r.useReducer)(X,{proyectos:[],formulario:!1,errorformulario:!1,proyecto:null,mensaje:null}),a=Object(i.a)(t,2),o=a[0],c=a[1],l=function(){var e=Object(B.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.get("/api/proyectos");case 3:t=e.sent,c({type:"OBTENER_PROYECTOS",payload:t.data.proyectos}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({type:"PROYECTO_ERROR",payload:{msg:"Hubo un error",categoria:"alerta-error"}});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(B.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.post("/api/proyectos",t);case 3:a=e.sent,console.log(a),c({type:"AGREGAR_PROYECTO",payload:a.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),c({type:"PROYECTO_ERROR",payload:{msg:"Hubo un error",categoria:"alerta-error"}});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(B.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.delete("/api/proyectos/".concat(t));case 3:c({type:"ELIMINAR_PROYECTO",payload:t}),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),c({type:"PROYECTO_ERROR",payload:{msg:"Hubo un error",categoria:"alerta-error"}});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(R.Provider,{value:{proyectos:o.proyectos,formulario:o.formulario,errorformulario:o.errorformulario,proyecto:o.proyecto,mensaje:o.mensaje,mostrarFormulario:function(){c({type:"FORMULARIO_PROYECTO"})},obtenerProyectos:l,agregarProyecto:s,mostrarError:function(){c({type:"VALIDAR_FORMULARIO"})},proyectoActual:function(e){c({type:"PROYECTO_ACTUAL",payload:e})},eliminarProyecto:u}},e.children)};function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var K=function(e,t){switch(t.type){case"TAREAS_PROYECTO":return q({},e,{tareasproyecto:t.payload});case"AGREGAR_TAREA":return q({},e,{tareasproyecto:[t.payload].concat(Object(V.a)(e.tareasproyecto)),errortarea:!1});case"VALIDAR_TAREA":return q({},e,{errortarea:!0});case"ELIMINAR_TAREA":return q({},e,{tareasproyecto:e.tareasproyecto.filter((function(e){return e._id!==t.payload}))});case"ACTUALIZAR_TAREA":return q({},e,{tareasproyecto:e.tareasproyecto.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"TAREA_ACTUAL":return q({},e,{tareaseleccionada:t.payload});case"LIMPIAR_TAREA":return q({},e,{tareaseleccionada:null});default:return e}},Q=function(e){var t=Object(r.useReducer)(K,{tareasproyecto:[],errortarea:!1,tareaseleccionada:null}),a=Object(i.a)(t,2),o=a[0],c=a[1],l=function(){var e=Object(B.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,W.get("/api/tareas",{params:{proyecto:t}});case 4:a=e.sent,console.log(a),c({type:"TAREAS_PROYECTO",payload:a.data.tareas}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(B.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,W.post("/api/tareas",t);case 4:a=e.sent,console.log(a),c({type:"AGREGAR_TAREA",payload:t}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(B.a)(M.a.mark((function e(t,a){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.delete("/api/tareas/".concat(t),{params:{proyecto:a}});case 3:c({type:"ELIMINAR_TAREA",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),p=function(){var e=Object(B.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.put("/api/tareas/".concat(t._id),t);case 3:a=e.sent,c({type:"ACTUALIZAR_TAREA",payload:a.data.tarea}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(P.Provider,{value:{tareasproyecto:o.tareasproyecto,errortarea:o.errortarea,tareaseleccionada:o.tareaseleccionada,obtenerTareas:l,agregarTarea:s,validarTarea:function(){c({type:"VALIDAR_TAREA"})},eliminarTarea:u,guardarTareaActual:function(e){c({type:"TAREA_ACTUAL",payload:e})},actualizarTarea:p,limpiarTarea:function(){c({type:"LIMPIAR_TAREA"})}}},e.children)},ee=function(e,t){switch(t.type){case"MOSTRAR_ALERTA":return{alerta:t.payload};case"OCULTAR_ALERTA":return{alerta:null};default:return e}},te=function(e){var t=Object(r.useReducer)(ee,{alerta:null}),a=Object(i.a)(t,2),o=a[0],c=a[1];return n.a.createElement(O.Provider,{value:{alerta:o.alerta,mostrarAlerta:function(e,t){c({type:"MOSTRAR_ALERTA",payload:{msg:e,categoria:t}}),setTimeout((function(){c({type:"OCULTAR_ALERTA"})}),5e3)}}},e.children)};function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ne=function(e,t){switch(t.type){case"REGISTRO_EXITOSO":case"LOGIN_EXITOSO":return localStorage.setItem("token",t.payload.token),re({},e,{autenticado:!0,mensaje:null,cargando:!1});case"OBTENER_USUARIO":return re({},e,{autenticado:!0,usuario:t.payload,cargando:!1});case"CERRAR_SESION":case"LOGIN_ERROR":case"REGISTRO_ERROR":return localStorage.removeItem("token"),re({},e,{token:null,usuario:null,autenticado:null,mensaje:t.payload,cargando:!1});default:return e}},oe=function(e){e?W.defaults.headers.common["x-auth-token"]=e:delete W.defaults.headers.common["x-auth-token"]},ce=function(e){var t={token:localStorage.getItem("token"),autenticado:null,usuario:null,mensaje:null,cargando:!0},a=Object(r.useReducer)(ne,t),o=Object(i.a)(a,2),c=o[0],l=o[1],s=function(){var e=Object(B.a)(M.a.mark((function e(t){var a,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.post("/api/usuarios",t);case 3:a=e.sent,console.log(a.data),l({type:"REGISTRO_EXITOSO",payload:a.data}),u(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r={msg:e.t0.response.data.msg,categoria:"alerta-error"},l({type:"REGISTRO_ERROR",payload:r});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(B.a)(M.a.mark((function e(){var t,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=localStorage.getItem("token"))&&oe(t),e.prev=2,e.next=5,W.get("/api/auth");case 5:a=e.sent,l({type:"OBTENER_USUARIO",payload:a.data.usuario}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0.response),l({type:"LOGIN_ERROR"});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(B.a)(M.a.mark((function e(t){var a,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.post("/api/auth",t);case 3:a=e.sent,l({type:"LOGIN_EXITOSO",payload:a.data}),u(),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data.msg),r={msg:e.t0.response.data.msg,categoria:"alerta-error"},l({type:"LOGIN_ERROR",payload:r});case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(d.Provider,{value:{token:c.token,autenticado:c.autenticado,usuario:c.usuario,mensaje:c.mensaje,cargando:c.cargando,registrarUsuario:s,iniciarSesion:p,usuarioAutenticado:u,cerrarSesion:function(){l({type:"CERRAR_SESION"})}}},e.children)},le=a(39),se=function(e){var t=e.component,a=Object(le.a)(e,["component"]),o=Object(r.useContext)(d),c=o.autenticado,l=o.cargando,u=o.usuarioAutenticado;return Object(r.useEffect)((function(){u()}),[]),n.a.createElement(s.b,Object.assign({},a,{render:function(e){return c||l?n.a.createElement(t,e):n.a.createElement(s.a,{to:"/"})}}))},ue=localStorage.getItem("token");ue&&oe(ue);var ie=function(){return n.a.createElement(Z,null,n.a.createElement(Q,null,n.a.createElement(te,null,n.a.createElement(ce,null,n.a.createElement(l.a,null,n.a.createElement(s.d,null,n.a.createElement(s.b,{exact:!0,path:"/",component:E}),n.a.createElement(s.b,{exact:!0,path:"/nueva-cuenta",component:h}),n.a.createElement(se,{exact:!0,path:"/proyectos",component:Y})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.b1e46b4a.chunk.js.map